"use strict";exports.id=3958,exports.ids=[3958],exports.modules={8294:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},40068:(a,b,c)=>{c.d(b,{Cf:()=>k,Es:()=>m,L3:()=>n,c7:()=>l,lG:()=>h,rr:()=>o});var d=c(21124);c(38301);var e=c(39641),f=c(47089),g=c(44943);function h({...a}){return(0,d.jsx)(e.bL,{"data-slot":"dialog",...a})}function i({...a}){return(0,d.jsx)(e.ZL,{"data-slot":"dialog-portal",...a})}function j({className:a,...b}){return(0,d.jsx)(e.hJ,{"data-slot":"dialog-overlay",className:(0,g.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...b})}function k({className:a,children:b,showCloseButton:c=!0,...h}){return(0,d.jsxs)(i,{"data-slot":"dialog-portal",children:[(0,d.jsx)(j,{}),(0,d.jsxs)(e.UC,{"data-slot":"dialog-content",className:(0,g.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...h,children:[b,c&&(0,d.jsxs)(e.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,d.jsx)(f.A,{}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function l({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"dialog-header",className:(0,g.cn)("flex flex-col gap-2 text-center sm:text-left",a),...b})}function m({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"dialog-footer",className:(0,g.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...b})}function n({className:a,...b}){return(0,d.jsx)(e.hE,{"data-slot":"dialog-title",className:(0,g.cn)("text-lg leading-none font-semibold",a),...b})}function o({className:a,...b}){return(0,d.jsx)(e.VY,{"data-slot":"dialog-description",className:(0,g.cn)("text-muted-foreground text-sm",a),...b})}},43700:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},53958:(a,b,c)=>{c.d(b,{A:()=>S});var d=c(21124),e=c(38301),f=c.n(e),g=c(42378),h=c(62186),i=c(99187),j=c(35284),k=c(32842),l=c(72408),m=c(75219),n=c(70045),o=c(1963),p=c(46681),q=c(80196),r=c(15303),s=c(79944),t=c(69957),u=c(30087),v=c(18004),w=c(11861),x=c(76180),y=c(10578),z=c(66920),A=c(23339);let B=(0,A.A)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);var C=c(3663),D=c(8849),E=(c(40284),c(40068));let F=(0,A.A)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var G=c(8294),H=c(59405),I=c(47089);let J=({images:a,vehicleName:b})=>{let[c,f]=(0,e.useState)(0),[g,h]=(0,e.useState)(!1),[k,l]=(0,e.useState)(0);if(!a||0===a.length)return(0,d.jsx)("div",{className:"w-full h-32 bg-muted/50 rounded-lg flex items-center justify-center",children:(0,d.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,d.jsx)(F,{className:"h-6 w-6 mx-auto mb-1 opacity-50"}),(0,d.jsx)("p",{className:"text-xs",children:"No images"})]})});let m=a=>{l(a),h(!0)},n=a[c],o=a[k];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"relative group",children:[(0,d.jsxs)("div",{className:"relative w-full h-32 rounded-lg overflow-hidden bg-muted/50",children:[(0,d.jsx)("img",{src:n.url,alt:n.alt,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105 cursor-pointer",onClick:()=>m(c)}),(0,d.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300 flex items-center justify-center",children:(0,d.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:(0,d.jsxs)(j.$,{variant:"secondary",size:"sm",className:"bg-white/90 hover:bg-white text-black h-6 px-2 text-xs",onClick:()=>m(c),children:[(0,d.jsx)(F,{className:"h-3 w-3 mr-1"}),"View"]})})}),(0,d.jsx)("div",{className:"absolute top-2 right-2",children:(0,d.jsxs)(i.E,{variant:"secondary",className:"bg-black/70 text-white text-xs px-1 py-0 h-5",children:[c+1,"/",a.length]})}),n.isPrimary&&(0,d.jsx)("div",{className:"absolute top-2 left-2",children:(0,d.jsx)(i.E,{variant:"default",className:"bg-primary text-xs px-1 py-0 h-5",children:"Main"})})]}),a.length>1&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j.$,{variant:"outline",size:"sm",className:"absolute left-2 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white shadow-lg h-6 w-6 p-0",onClick:()=>{f(b=>(b-1+a.length)%a.length)},children:(0,d.jsx)(G.A,{className:"h-3 w-3"})}),(0,d.jsx)(j.$,{variant:"outline",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white shadow-lg h-6 w-6 p-0",onClick:()=>{f(b=>(b+1)%a.length)},children:(0,d.jsx)(H.A,{className:"h-3 w-3"})})]})]}),a.length>1&&(0,d.jsx)("div",{className:"flex gap-1 overflow-x-auto pb-1",children:a.map((a,b)=>(0,d.jsxs)("button",{onClick:()=>f(b),className:`relative flex-shrink-0 w-8 h-8 rounded overflow-hidden border transition-all duration-200 ${b===c?"border-primary ring-1 ring-primary/20":"border-muted hover:border-muted-foreground/50"}`,children:[(0,d.jsx)("img",{src:a.url,alt:a.alt,className:"w-full h-full object-cover"}),a.isPrimary&&(0,d.jsx)("div",{className:"absolute top-0.5 left-0.5",children:(0,d.jsx)("div",{className:"w-1 h-1 bg-primary rounded-full"})})]},a.id))}),n.caption&&(0,d.jsx)("div",{className:"text-center",children:(0,d.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:n.caption})})]}),(0,d.jsx)(E.lG,{open:g,onOpenChange:h,children:(0,d.jsxs)(E.Cf,{className:"max-w-7xl w-full h-full max-h-[90vh] p-0",children:[(0,d.jsx)(E.c7,{className:"p-6 pb-0",children:(0,d.jsxs)(E.L3,{className:"flex items-center justify-between",children:[(0,d.jsxs)("span",{children:[b," - Image Gallery"]}),(0,d.jsx)(j.$,{variant:"ghost",size:"sm",onClick:()=>h(!1),className:"h-8 w-8 p-0",children:(0,d.jsx)(I.A,{className:"h-4 w-4"})})]})}),(0,d.jsx)("div",{className:"flex-1 relative overflow-hidden",children:(0,d.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center bg-black",children:[(0,d.jsx)("img",{src:o.url,alt:o.alt,className:"max-w-full max-h-full object-contain"}),a.length>1&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j.$,{variant:"outline",size:"sm",className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white",onClick:()=>{l(b=>(b-1+a.length)%a.length)},children:(0,d.jsx)(G.A,{className:"h-4 w-4"})}),(0,d.jsx)(j.$,{variant:"outline",size:"sm",className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white",onClick:()=>{l(b=>(b+1)%a.length)},children:(0,d.jsx)(H.A,{className:"h-4 w-4"})})]}),(0,d.jsx)("div",{className:"absolute top-4 right-4",children:(0,d.jsxs)(i.E,{variant:"secondary",className:"bg-black/70 text-white",children:[k+1," / ",a.length]})})]})}),(0,d.jsxs)("div",{className:"p-6 pt-0",children:[(0,d.jsxs)("div",{className:"text-center space-y-2",children:[(0,d.jsx)("h3",{className:"font-semibold",children:o.alt}),o.caption&&(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:o.caption})]}),a.length>1&&(0,d.jsx)("div",{className:"flex gap-2 overflow-x-auto mt-4 justify-center",children:a.map((a,b)=>(0,d.jsx)("button",{onClick:()=>l(b),className:`relative flex-shrink-0 w-12 h-12 rounded-lg overflow-hidden border-2 transition-all duration-200 ${b===k?"border-primary ring-2 ring-primary/20":"border-muted hover:border-muted-foreground/50"}`,children:(0,d.jsx)("img",{src:a.url,alt:a.alt,className:"w-full h-full object-cover"})},a.id))})]})]})})]})};var K=c(49932),L=c(45608),M=c(68254),N=c(43700);let O=(0,A.A)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);var P=c(91292),Q=c(59270);let R=({isOpen:a,onClose:b,onSubmit:c,editingEvent:g=null,title:h})=>{let[i,k]=(0,e.useState)({location:g?.location||"",status:g?.status||"",notes:g?.notes||"",documents:[]}),[m,n]=(0,e.useState)(!1);f().useEffect(()=>{a&&k({location:g?.location||"",status:g?.status||"",notes:g?.notes||"",documents:[]})},[a,g]);let o=async a=>{if(a.preventDefault(),i.location&&i.status){n(!0);try{await c({location:i.location,status:i.status,notes:i.notes||void 0}),k({location:"",status:"",notes:"",documents:[]}),b()}catch(a){console.error("Failed to submit event:",a)}finally{n(!1)}}},p=h||(g?"Edit Tracking Event":"Add New Tracking Event");return(0,d.jsx)(E.lG,{open:a,onOpenChange:b,children:(0,d.jsxs)(E.Cf,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,d.jsxs)(E.c7,{children:[(0,d.jsxs)(E.L3,{className:"flex items-center gap-2",children:[g?(0,d.jsx)(x.A,{className:"h-5 w-5"}):(0,d.jsx)(D.A,{className:"h-5 w-5"}),p]}),(0,d.jsx)(E.rr,{children:g?"Update the tracking event details below.":"Add a new tracking event to record the vehicle's journey progress."})]}),(0,d.jsxs)("form",{onSubmit:o,className:"space-y-6",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.J,{htmlFor:"event-location",children:"Location *"}),(0,d.jsxs)(L.l6,{value:i.location,onValueChange:a=>k(b=>({...b,location:a})),children:[(0,d.jsx)(L.bq,{children:(0,d.jsx)(L.yv,{placeholder:"Select location"})}),(0,d.jsx)(L.gC,{children:Q.zf.map(a=>(0,d.jsxs)(L.eb,{value:a.name,children:[a.name," - ",a.type]},a.id))})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.J,{htmlFor:"event-status",children:"Status *"}),(0,d.jsxs)(L.l6,{value:i.status,onValueChange:a=>k(b=>({...b,status:a})),children:[(0,d.jsx)(L.bq,{children:(0,d.jsx)(L.yv,{placeholder:"Select status"})}),(0,d.jsxs)(L.gC,{children:[(0,d.jsx)(L.eb,{value:"Ordered",children:"Ordered"}),(0,d.jsx)(L.eb,{value:"In Transit",children:"In Transit"}),(0,d.jsx)(L.eb,{value:"Clearing Customs",children:"Clearing Customs"}),(0,d.jsx)(L.eb,{value:"At Port",children:"At Port"}),(0,d.jsx)(L.eb,{value:"In Local Delivery",children:"In Local Delivery"}),(0,d.jsx)(L.eb,{value:"Delivered",children:"Delivered"})]})]})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.J,{htmlFor:"event-notes",children:"Notes (Optional)"}),(0,d.jsx)(M.T,{id:"event-notes",placeholder:"Add any additional notes about this event...",value:i.notes,onChange:a=>k(b=>({...b,notes:a.target.value})),rows:3})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)(l.J,{children:"Documents (Optional)"}),(0,d.jsx)("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-4",children:(0,d.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,d.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 cursor-pointer bg-muted/50 hover:bg-muted/75 rounded-lg transition-colors",children:[(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,d.jsx)(N.A,{className:"w-8 h-8 mb-2 text-muted-foreground"}),(0,d.jsxs)("p",{className:"mb-2 text-sm text-muted-foreground",children:[(0,d.jsx)("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"PDF, DOC, or image files"})]}),(0,d.jsx)("input",{type:"file",className:"hidden",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:a=>{let b=a.target.files;if(b&&b.length>0){let a=Array.from(b).map((a,b)=>({id:`doc-${Date.now()}-${b}`,name:a.name,url:URL.createObjectURL(a)}));k(b=>({...b,documents:[...b.documents,...a]}))}}})]})})}),i.documents.length>0&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.J,{children:"Uploaded Documents:"}),(0,d.jsx)("div",{className:"space-y-2",children:i.documents.map(a=>(0,d.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(O,{className:"h-4 w-4 text-muted-foreground"}),(0,d.jsx)("span",{className:"text-sm font-medium",children:a.name})]}),(0,d.jsx)(j.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{var b;return b=a.id,void k(a=>({...a,documents:a.documents.filter(a=>a.id!==b)}))},className:"h-6 w-6 p-0 text-destructive hover:text-destructive",children:(0,d.jsx)(P.A,{className:"h-4 w-4"})})]},a.id))})]})]}),(0,d.jsxs)(E.Es,{className:"gap-2",children:[(0,d.jsxs)(j.$,{type:"button",variant:"outline",onClick:b,disabled:m,children:[(0,d.jsx)(I.A,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,d.jsx)(j.$,{type:"submit",disabled:!i.location||!i.status||m,className:"flex items-center gap-2",children:m?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),g?"Updating...":"Adding..."]}):(0,d.jsx)(d.Fragment,{children:g?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(x.A,{className:"h-4 w-4"}),"Update Event"]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(D.A,{className:"h-4 w-4"}),"Add Event"]})})})]})]})]})})},S=({vehicleId:a,backUrl:b="/vehicles",showEditButton:c=!0})=>{let f=(0,g.useRouter)(),{user:A}=(0,K.n)(),[D,E]=(0,e.useState)(null),[F,G]=(0,e.useState)(!0),[H,I]=(0,e.useState)(null),[L,M]=(0,e.useState)("overview"),[N,O]=(0,e.useState)(!1),[P,Q]=(0,e.useState)(null),S=(0,e.useMemo)(()=>A||{role:"Admin",location:{id:"test-location",name:"Test Location",type:"Port"}},[A]),T=a=>({street:a.street||a.address?.street||"N/A",city:a.city||a.address?.city||"N/A",country:a.country||a.address?.country||"N/A"}),U=a=>a||{originPort:"N/A",destinationPort:"N/A",shippingCompany:"N/A",bookingNumber:"N/A",vesselName:null,containerNumber:null,departureDate:null,expectedArrivalDate:null,documents:[]},V=a=>({customsStatus:a.customsStatus||"PENDING",importDuty:a.importDuty||0,customsClearanceDate:a.customsClearanceDate||null,customsNotes:a.customsNotes||null,documents:a.customsDetails?.documents||[]});(0,e.useEffect)(()=>{(async()=>{if(a)try{G(!0),I(null);let b=await fetch(`/api/vehicles/${a}`);if(!b.ok){if(404===b.status)throw Error("Vehicle not found");throw Error("Failed to fetch vehicle")}let c=await b.json();if(c)if(0)if(S){let a=S.location;a&&(c.currentLocation.id===a.id||c.shippingDetails?.destinationPort&&c.shippingDetails.destinationPort.includes(a.name.split(" ")[0])||c.currentLocation.type===a.type)?E(c):E(null)}else E(c);else E(c);else E(null)}catch(a){console.error("Error fetching vehicle:",a),I(a instanceof Error?a.message:"Failed to load vehicle"),E(null)}finally{G(!1)}})()},[a]);let W=a=>{switch(a){case"Delivered":return"bg-green-100 text-green-700 border-green-200 dark:bg-green-950 dark:text-green-300 dark:border-green-700";case"In Local Delivery":return"bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-950 dark:text-blue-300 dark:border-blue-700";case"At Port":return"bg-yellow-100 text-yellow-700 border-yellow-200 dark:bg-yellow-950 dark:text-yellow-300 dark:border-yellow-700";case"Clearing Customs":return"bg-orange-100 text-orange-700 border-orange-200 dark:bg-orange-950 dark:text-orange-300 dark:border-orange-700";case"In Transit":return"bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-950 dark:text-purple-300 dark:border-purple-700";default:return"bg-gray-100 text-gray-700 border-gray-200 dark:bg-gray-950 dark:text-gray-300 dark:border-gray-700"}},X=a=>{switch(a){case"Delivered":return(0,d.jsx)(m.A,{className:"h-4 w-4"});case"In Local Delivery":return(0,d.jsx)(n.A,{className:"h-4 w-4"});case"At Port":return(0,d.jsx)(o.A,{className:"h-4 w-4"});case"Clearing Customs":return(0,d.jsx)(p.A,{className:"h-4 w-4"});case"In Transit":return(0,d.jsx)(q.A,{className:"h-4 w-4"});default:return(0,d.jsx)(r.A,{className:"h-4 w-4"})}},Y=a=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(a)),Z=async a=>{if(D)if(P)E({...D,trackingHistory:D.trackingHistory.map(b=>b.id===P.id?{...b,location:a.location,status:a.status,notes:a.notes}:b),status:a.status});else{let b={id:`event-${Date.now()}`,timestamp:new Date,location:a.location,status:a.status,notes:a.notes};E({...D,trackingHistory:[b,...D.trackingHistory],status:a.status})}};return F?(0,d.jsx)("div",{className:"min-h-screen bg-background",children:(0,d.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,d.jsxs)("div",{className:"text-center space-y-4",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,d.jsx)("p",{className:"text-lg text-muted-foreground",children:"Loading vehicle details..."})]})})}):H?(0,d.jsx)("div",{className:"min-h-screen bg-background",children:(0,d.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,d.jsx)(h.Zp,{children:(0,d.jsx)(h.aR,{children:(0,d.jsxs)("div",{className:"text-center space-y-4",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-destructive",children:"Error Loading Vehicle"}),(0,d.jsx)("p",{className:"text-muted-foreground",children:H}),(0,d.jsxs)(j.$,{onClick:()=>f.push(b),children:[(0,d.jsx)(s.A,{className:"h-4 w-4 mr-2"}),"Back to Vehicles"]})]})})})})}):D?(0,d.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,d.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,d.jsx)("div",{className:"mb-6",children:(0,d.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,d.jsx)(j.$,{variant:"ghost",size:"sm",onClick:()=>f.push(b),className:"p-2",children:(0,d.jsx)(s.A,{className:"h-4 w-4"})}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("h1",{className:"text-3xl lg:text-4xl font-bold tracking-tight",children:[D.make," ",D.model]}),(0,d.jsx)("p",{className:"text-muted-foreground mt-2 text-lg",children:"Vehicle Details & Tracking Information"}),(0,d.jsxs)("div",{className:"flex items-center gap-4 mt-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(t.A,{className:"h-4 w-4 text-blue-500"}),(0,d.jsxs)("span",{className:"text-sm text-muted-foreground",children:["VIN: ",D.vin]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"}),(0,d.jsxs)("span",{className:"text-sm text-muted-foreground",children:[D.year," • ",D.color]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(v.A,{className:"h-4 w-4 text-muted-foreground"}),(0,d.jsxs)(i.E,{variant:"outline",className:`${W(D.status)} text-xs px-2 py-1`,children:[X(D.status),(0,d.jsx)("span",{className:"ml-1",children:D.status})]})]})]})]})]})}),(0,d.jsxs)(k.Tabs,{value:L,onValueChange:M,className:"space-y-6",children:[(0,d.jsxs)(k.TabsList,{className:"grid w-full grid-cols-3",children:[(0,d.jsxs)(k.TabsTrigger,{value:"overview",className:"flex items-center gap-2",children:[(0,d.jsx)(u.A,{className:"h-4 w-4"}),"Overview"]}),(0,d.jsxs)(k.TabsTrigger,{value:"shipping",className:"flex items-center gap-2",children:[(0,d.jsx)(o.A,{className:"h-4 w-4"}),"Shipping"]}),(0,d.jsxs)(k.TabsTrigger,{value:"track-events",className:"flex items-center gap-2",children:[(0,d.jsx)(w.A,{className:"h-4 w-4"}),"Track Events"]})]}),(0,d.jsxs)(k.a,{value:"overview",className:"space-y-6",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,d.jsxs)(h.Zp,{className:"h-full flex flex-col",children:[(0,d.jsx)(h.aR,{children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,d.jsx)(u.A,{className:"h-5 w-5"}),"Vehicle Information"]}),S&&c&&(0,d.jsxs)(j.$,{variant:"outline",size:"sm",onClick:()=>f.push(`/admin/vehicles/${a}/edit/basic`),children:[(0,d.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Edit Basic Info"]})]})}),(0,d.jsxs)(h.Wu,{className:"space-y-4 flex-1",children:[D.images&&D.images.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-muted-foreground mb-2 block",children:"Images"}),(0,d.jsx)(J,{images:D.images,vehicleName:`${D.make} ${D.model}`})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Make"}),(0,d.jsx)("p",{className:"text-sm",children:D.make})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Model"}),(0,d.jsx)("p",{className:"text-sm",children:D.model})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Year"}),(0,d.jsx)("p",{className:"text-sm",children:D.year})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Color"}),(0,d.jsx)("p",{className:"text-sm",children:D.color})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Trim"}),(0,d.jsx)("p",{className:"text-sm",children:D.trim||"N/A"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Engine"}),(0,d.jsx)("p",{className:"text-sm",children:D.engineType||"N/A"})]})]})]})]}),(0,d.jsxs)("div",{className:"space-y-6 flex flex-col h-full",children:[(0,d.jsxs)(h.Zp,{className:"flex-1 flex flex-col",children:[(0,d.jsx)(h.aR,{children:(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,d.jsx)(y.A,{className:"h-5 w-5"}),"Owner Information"]})})}),(0,d.jsx)(h.Wu,{className:"space-y-4 flex-1",children:(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Name"}),(0,d.jsx)("p",{className:"text-sm",children:D.owner.name})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),(0,d.jsx)("p",{className:"text-sm",children:D.owner.email})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),(0,d.jsx)("p",{className:"text-sm",children:D.owner.phone})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Nationality"}),(0,d.jsx)("p",{className:"text-sm",children:D.owner.nationality})]})]})})]}),(0,d.jsxs)(h.Zp,{children:[(0,d.jsx)(h.aR,{children:(0,d.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,d.jsx)(z.A,{className:"h-5 w-5"}),"Current Location & Status"]})}),(0,d.jsxs)(h.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Current Location"}),(0,d.jsxs)("div",{className:"mt-2 p-3 bg-muted/50 rounded-lg",children:[(0,d.jsx)("div",{className:"font-medium text-sm",children:D.currentLocation.name}),(0,d.jsx)("div",{className:"text-xs text-muted-foreground",children:T(D.currentLocation).street}),(0,d.jsxs)("div",{className:"text-xs text-muted-foreground",children:[T(D.currentLocation).city,", ",T(D.currentLocation).country]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Current Status"}),(0,d.jsx)("div",{className:"mt-2",children:(0,d.jsxs)(i.E,{variant:"outline",className:`${W(D.status)} text-xs px-2 py-1`,children:[X(D.status),(0,d.jsx)("span",{className:"ml-1",children:D.status})]})})]})]})]})]})]}),(0,d.jsxs)(h.Zp,{children:[(0,d.jsx)(h.aR,{children:(0,d.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,d.jsx)(B,{className:"h-5 w-5"}),"Delivery Status"]})}),(0,d.jsx)(h.Wu,{children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-950/50 rounded-lg border border-blue-200 dark:border-blue-700",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:(a=>{let b=new Date(a.estimatedDelivery),c=new Date,d=Math.ceil((b.getTime()-c.getTime())/864e5);return d<0?"Overdue":0===d?"Today":1===d?"Tomorrow":`${d} days`})(D)}),(0,d.jsx)("div",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Until Delivery"})]}),(0,d.jsxs)("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950/50 rounded-lg border border-green-200 dark:border-green-700",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:Y(D.estimatedDelivery)}),(0,d.jsx)("div",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Estimated Delivery"})]}),(0,d.jsxs)("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-950/50 rounded-lg border border-purple-200 dark:border-purple-700",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:Y(D.orderDate)}),(0,d.jsx)("div",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:"Order Date"})]})]})})]})]}),(0,d.jsxs)(k.a,{value:"shipping",className:"space-y-6",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,d.jsxs)(h.Zp,{children:[(0,d.jsx)(h.aR,{children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,d.jsx)(o.A,{className:"h-5 w-5"}),"Shipping Details"]}),S&&c&&(0,d.jsxs)(j.$,{variant:"outline",size:"sm",onClick:()=>f.push(`/admin/vehicles/${a}/edit/shipping`),children:[(0,d.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Edit Shipping"]})]})}),(0,d.jsxs)(h.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(l.J,{className:"text-sm text-muted-foreground",children:"Origin Port"}),(0,d.jsx)("p",{className:"font-medium",children:U(D.shippingDetails).originPort})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.J,{className:"text-sm text-muted-foreground",children:"Destination Port"}),(0,d.jsx)("p",{className:"font-medium",children:U(D.shippingDetails).destinationPort})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.J,{className:"text-sm text-muted-foreground",children:"Shipping Company"}),(0,d.jsx)("p",{className:"font-medium",children:U(D.shippingDetails).shippingCompany})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.J,{className:"text-sm text-muted-foreground",children:"Booking Number"}),(0,d.jsx)("p",{className:"font-mono text-sm bg-muted px-2 py-1 rounded",children:U(D.shippingDetails).bookingNumber})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.J,{className:"text-sm text-muted-foreground",children:"Vessel Name"}),(0,d.jsx)("p",{className:"font-medium",children:U(D.shippingDetails).vesselName||"Not specified"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.J,{className:"text-sm text-muted-foreground",children:"Container Number"}),(0,d.jsx)("p",{className:"font-mono text-sm bg-muted px-2 py-1 rounded",children:U(D.shippingDetails).containerNumber||"Not specified"})]})]})]}),(0,d.jsxs)(h.Zp,{children:[(0,d.jsx)(h.aR,{children:(0,d.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,d.jsx)(r.A,{className:"h-5 w-5"}),"Timeline"]})}),(0,d.jsx)(h.Wu,{className:"space-y-4",children:(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)(l.J,{className:"text-sm text-muted-foreground",children:"Departure Date"}),(0,d.jsx)("p",{className:"text-sm",children:U(D.shippingDetails).departureDate?Y(new Date(U(D.shippingDetails).departureDate)):"Not scheduled"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)(l.J,{className:"text-sm text-muted-foreground",children:"Expected Arrival"}),(0,d.jsx)("p",{className:"text-sm",children:U(D.shippingDetails).expectedArrivalDate?Y(new Date(U(D.shippingDetails).expectedArrivalDate)):"Not scheduled"})]})]})]})})]})]}),(0,d.jsxs)(h.Zp,{children:[(0,d.jsx)(h.aR,{children:(0,d.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,d.jsx)(p.A,{className:"h-5 w-5"}),"Customs Information"]})}),(0,d.jsxs)(h.Wu,{children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(l.J,{className:"text-sm text-muted-foreground",children:"Status"}),(0,d.jsx)("div",{className:"mt-1",children:(0,d.jsx)(i.E,{variant:"outline",className:`${W(D.status)} text-sm px-2 py-1`,children:V(D).customsStatus})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.J,{className:"text-sm text-muted-foreground",children:"Import Duty"}),(0,d.jsxs)("p",{className:"font-medium",children:["₦",V(D).importDuty.toLocaleString()]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.J,{className:"text-sm text-muted-foreground",children:"Clearance Date"}),(0,d.jsx)("p",{className:"text-sm",children:V(D).customsClearanceDate?Y(new Date(V(D).customsClearanceDate)):"Pending"})]})]}),V(D).customsNotes&&(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)(l.J,{className:"text-sm text-muted-foreground",children:"Notes"}),(0,d.jsx)("p",{className:"text-sm mt-1",children:V(D).customsNotes})]})]})]}),(0,d.jsxs)(h.Zp,{children:[(0,d.jsx)(h.aR,{children:(0,d.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,d.jsx)(C.A,{className:"h-5 w-5"}),"Documents"]})}),(0,d.jsx)(h.Wu,{children:U(D.shippingDetails).documents&&U(D.shippingDetails).documents.length>0||V(D).documents&&V(D).documents.length>0?(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[U(D.shippingDetails).documents?.map(a=>(0,d.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>window.open(a.url,"_blank"),children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/50 rounded flex items-center justify-center",children:(0,d.jsx)(C.A,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("div",{className:"font-medium text-sm truncate",children:a.name}),(0,d.jsx)("div",{className:"text-xs text-muted-foreground",children:"Shipping Document"})]})]},a.id)),V(D).documents?.map(a=>(0,d.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>window.open(a.url,"_blank"),children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/50 rounded flex items-center justify-center",children:(0,d.jsx)(C.A,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("div",{className:"font-medium text-sm truncate",children:a.name}),(0,d.jsx)("div",{className:"text-xs text-muted-foreground",children:"Customs Document"})]})]},a.id))]}):(0,d.jsxs)("div",{className:"text-center py-8",children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-muted/30 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,d.jsx)(C.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,d.jsx)("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No Documents"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"No shipping or customs documents have been uploaded for this vehicle yet."})]})})]})]}),(0,d.jsx)(k.a,{value:"track-events",className:"space-y-6",children:(0,d.jsxs)(h.Zp,{children:[(0,d.jsx)(h.aR,{children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,d.jsx)(w.A,{className:"h-5 w-5"}),"Tracking History"]}),S&&!1]})}),(0,d.jsx)(h.Wu,{className:"space-y-6",children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,d.jsx)(t.A,{className:"h-5 w-5"}),"Journey Timeline"]}),D.trackingHistory&&D.trackingHistory.length>0?(0,d.jsx)("div",{className:"space-y-4",children:(()=>{let a=D.trackingHistory.sort((a,b)=>new Date(b.timestamp).getTime()-new Date(a.timestamp).getTime());return a.map((b,c)=>(0,d.jsxs)("div",{className:"flex gap-4",children:[(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[(0,d.jsx)("div",{className:"w-3 h-3 rounded-full bg-primary"}),c<a.length-1&&(0,d.jsx)("div",{className:"w-0.5 h-8 bg-muted-foreground/25 mt-1"})]}),(0,d.jsx)("div",{className:"flex-1 pb-4",children:(0,d.jsx)(h.Zp,{children:(0,d.jsx)(h.Wu,{className:"pt-4",children:(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)(i.E,{variant:"outline",className:`${W(b.status)} text-xs px-2 py-1`,children:[X(b.status),(0,d.jsx)("span",{className:"ml-1",children:b.status})]}),(0,d.jsx)("span",{className:"text-sm text-muted-foreground",children:Y(b.timestamp)})]}),(0,d.jsx)("div",{className:"font-medium",children:b.location}),b.notes&&(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:b.notes})]}),S&&!1]})})})})]},b.id))})()}):(0,d.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,d.jsx)(w.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,d.jsx)("p",{children:"No tracking events recorded yet."}),S&&!1,S&&(0,d.jsx)("p",{className:"text-sm",children:"Track events are view-only for administrators."})]})]})})]})})]})]}),(0,d.jsx)(R,{isOpen:N,onClose:()=>{O(!1),Q(null)},onSubmit:Z,editingEvent:P})]}):(0,d.jsx)("div",{className:"min-h-screen bg-background",children:(0,d.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,d.jsx)(h.Zp,{children:(0,d.jsx)(h.aR,{children:(0,d.jsxs)("div",{className:"text-center space-y-4",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-destructive",children:"Vehicle Not Found"}),(0,d.jsx)("p",{className:"text-muted-foreground",children:"This vehicle does not exist or you do not have access."}),(0,d.jsxs)(j.$,{onClick:()=>f.push(b),children:[(0,d.jsx)(s.A,{className:"h-4 w-4 mr-2"}),"Back to Vehicles"]})]})})})})})}},91292:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}};