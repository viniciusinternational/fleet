(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5695],{28373:(e,t,s)=>{Promise.resolve().then(s.bind(s,83232))},52987:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(71847).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},83232:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var l=s(95155),r=s(12115),a=s(20063),d=s(86948),i=s(3998),n=s(21873),c=s(24947),o=s(52987),x=s(91593),m=s(23214),u=s(85149);let h=()=>{let e=(0,a.useRouter)(),[t,s]=(0,r.useState)([]),[h,g]=(0,r.useState)(!0),[p]=(0,r.useState)(m.rB.find(e=>"Normal"===e.role)||m.rB[1]),b=null==p?void 0:p.location;(0,r.useEffect)(()=>{setTimeout(()=>{s((b?m.wo.filter(e=>e.currentLocation.id===b.id||e.shippingDetails.destinationPort.includes(b.name.split(" ")[0])||e.currentLocation.type===b.type):m.wo).sort((e,t)=>new Date(t.orderDate).getTime()-new Date(e.orderDate).getTime()).slice(0,5)),g(!1)},1e3)},[b]),t.slice(0,5);let v={total:t.length,byStatus:Object.values(x.zl).reduce((e,s)=>(e[s]=t.filter(e=>e.status===s).length,e),{}),overdue:t.filter(e=>new Date(e.estimatedDelivery)<new Date&&"Delivered"!==e.status).length,urgent:t.filter(e=>{let t=new Date(e.estimatedDelivery),s=new Date,l=Math.ceil((t.getTime()-s.getTime())/864e5);return l<=3&&l>=0&&"Delivered"!==e.status}).length};return h?(0,l.jsx)("div",{className:"min-h-screen bg-background",children:(0,l.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,l.jsxs)("div",{className:"text-center space-y-4",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,l.jsx)("p",{className:"text-lg text-muted-foreground",children:"Loading operational dashboard..."})]})})}):(0,l.jsx)("div",{className:"min-h-screen bg-background",children:(0,l.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl lg:text-4xl font-bold tracking-tight",children:"User Dashboard"}),(0,l.jsx)("p",{className:"text-muted-foreground mt-2 text-lg",children:"Track vehicles and monitor delivery progress for your location"})]}),b&&(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(n.A,{className:"h-4 w-4 text-blue-500"}),(0,l.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Location: ",b.name,", ",b.address.city]})]})]})}),(0,l.jsxs)(d.Zp,{children:[(0,l.jsx)(d.aR,{children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,l.jsx)(c.A,{className:"h-5 w-5"}),"Recent Vehicles"]}),(0,l.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>e.push("/normal/vehicles"),className:"flex items-center gap-2",children:["View All",(0,l.jsx)(o.A,{className:"h-4 w-4"})]})]})}),(0,l.jsxs)(d.Wu,{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,l.jsxs)("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-950/50 rounded-lg border border-blue-200 dark:border-blue-700",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:v.total}),(0,l.jsx)("div",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Total Vehicles"}),(0,l.jsx)("div",{className:"text-xs text-blue-500 dark:text-blue-400 mt-1",children:"In your location"})]}),(0,l.jsxs)("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950/50 rounded-lg border border-green-200 dark:border-green-700",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:v.byStatus.Delivered||0}),(0,l.jsx)("div",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Delivered"}),(0,l.jsx)("div",{className:"text-xs text-green-500 dark:text-green-400 mt-1",children:"Successfully completed"})]}),(0,l.jsxs)("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-950/50 rounded-lg border border-purple-200 dark:border-purple-700",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:v.byStatus["In Transit"]||0}),(0,l.jsx)("div",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:"In Transit"}),(0,l.jsx)("div",{className:"text-xs text-purple-500 dark:text-purple-400 mt-1",children:"Currently shipping"})]}),(0,l.jsxs)("div",{className:"text-center p-4 bg-yellow-50 dark:bg-yellow-950/50 rounded-lg border border-yellow-200 dark:border-yellow-700",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-yellow-700 dark:text-yellow-300",children:v.byStatus["At Port"]||0}),(0,l.jsx)("div",{className:"text-sm text-yellow-600 dark:text-yellow-400 font-medium",children:"At Port"}),(0,l.jsx)("div",{className:"text-xs text-yellow-500 dark:text-yellow-400 mt-1",children:"Awaiting clearance"})]})]}),(0,l.jsx)(u.A,{showFilters:!1,showViewToggle:!1,showAddButton:!1,showSelection:!1,onVehicleClick:t=>e.push("/normal/vehicles/".concat(t)),title:"Recent Vehicles",subtitle:"Latest vehicles in your area"})]})]})]})})}}},e=>{e.O(0,[5239,3637,4127,2673,3437,5815,3670,5149,8441,1255,7358],()=>e(e.s=28373)),_N_E=e.O()}]);