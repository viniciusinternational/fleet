(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{19672:(e,t,r)=>{"use strict";r.d(t,{n:()=>i});var n=r(25959),a=r(89863);let i=(0,n.v)()((0,a.Zr)((e,t)=>({user:null,token:null,refreshToken:null,isAuthenticated:null,login:()=>{},logout:()=>{alert("You are logged out"),e({user:null,token:null,refreshToken:null,isAuthenticated:!1})},setToken:(t,r)=>e({token:t,refreshToken:r}),setUser:t=>e({user:t}),setAuthenticated:t=>e({isAuthenticated:t}),checkAuth:async()=>{e({isAuthenticated:!!t().user})}}),{name:"vinicius-fleet-store",partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[t]=e;return!["user","token","refreshToken","isAuthenticated"].includes(t)}))}))},20063:(e,t,r)=>{"use strict";var n=r(47260);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},22702:(e,t,r)=>{Promise.resolve().then(r.bind(r,89547))},25959:(e,t,r)=>{"use strict";r.d(t,{v:()=>s});var n=r(12115);let a=e=>{let t,r=new Set,n=(e,n)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=n?n:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,i={setState:n,getState:a,getInitialState:()=>s,subscribe:e=>(r.add(e),()=>r.delete(e))},s=t=e(n,a,i);return i},i=e=>{let t=(e=>e?a(e):a)(e),r=e=>(function(e,t=e=>e){let r=n.useSyncExternalStore(e.subscribe,n.useCallback(()=>t(e.getState()),[e,t]),n.useCallback(()=>t(e.getInitialState()),[e,t]));return n.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},s=e=>e?i(e):i},35299:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(71847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},45064:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(95155),a=r(12115);let i=function(){return(0,a.useEffect)(()=>{console.debug("[Login] Redirecting to auth with notification_id");let e="".concat(window.location.origin,"/auth/callback");window.location.href="https://auth.viniciusint.com/api/v1/zitadel/auth/url?callback_uri=".concat(encodeURIComponent(e),"&notification_id=123")},[]),(0,n.jsx)(n.Fragment,{})}},71847:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(12115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:u="",children:c,iconNode:d,...h}=e;return(0,n.createElement)("svg",{ref:t,...s,width:a,height:a,stroke:r,strokeWidth:o?24*Number(l)/Number(a):l,className:i("lucide",u),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...d.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let r=(0,n.forwardRef)((r,s)=>{let{className:o,...u}=r;return(0,n.createElement)(l,{ref:s,iconNode:t,className:i("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...u})});return r.displayName=a(e),r}},89547:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(95155),a=r(12115),i=r(20063),s=r(19672),l=r(91593),o=r(45064),u=r(35299);function c(){let e=(0,i.useRouter)(),{user:t,isAuthenticated:r,checkAuth:c}=(0,s.n)();return((0,a.useEffect)(()=>{(async()=>{await c()})()},[c]),(0,a.useEffect)(()=>{if(console.log({isAuthenticated:r,user:t}),r&&t)switch(console.log(t),t.role){case l.Xh.ADMIN:case l.Xh.CEO:e.push("/admin/dashboard");break;case l.Xh.NORMAL:e.push("/normal/dashboard")}},[r,t,e]),null===r)?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,n.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,n.jsx)(u.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Checking authentication..."})]})}):!1===r?(0,n.jsx)(o.default,{}):(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,n.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,n.jsx)(u.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Redirecting..."})]})})}},89863:(e,t,r)=>{"use strict";r.d(t,{Zr:()=>a});let n=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>n(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>n(t)(e)}}},a=(e,t)=>(r,a,i)=>{let s,l={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let n=e=>null===e?null:JSON.parse(e,void 0),a=null!=(t=r.getItem(e))?t:null;return a instanceof Promise?a.then(n):n(a)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1,u=new Set,c=new Set,d=l.storage;if(!d)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),r(...e)},a,i);let h=()=>{let e=l.partialize({...a()});return d.setItem(l.name,{state:e,version:l.version})},m=i.setState;i.setState=(e,t)=>(m(e,t),h());let f=e((...e)=>(r(...e),h()),a,i);i.getInitialState=()=>f;let g=()=>{var e,t;if(!d)return;o=!1,u.forEach(e=>{var t;return e(null!=(t=a())?t:f)});let i=(null==(t=l.onRehydrateStorage)?void 0:t.call(l,null!=(e=a())?e:f))||void 0;return n(d.getItem.bind(d))(l.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===l.version)return[!1,e.state];else{if(l.migrate){let t=l.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[n,i]=e;if(r(s=l.merge(i,null!=(t=a())?t:f),!0),n)return h()}).then(()=>{null==i||i(s,void 0),s=a(),o=!0,c.forEach(e=>e(s))}).catch(e=>{null==i||i(void 0,e)})};return i.persist={setOptions:e=>{l={...l,...e},e.storage&&(d=e.storage)},clearStorage:()=>{null==d||d.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:e=>(u.add(e),()=>{u.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},l.skipHydration||g(),s||f}},91593:(e,t,r)=>{"use strict";r.d(t,{Xh:()=>s,i:()=>i,iF:()=>a,zl:()=>n});let n={ORDERED:"Ordered",IN_TRANSIT:"In Transit",CLEARING_CUSTOMS:"Clearing Customs",AT_PORT:"At Port",IN_LOCAL_DELIVERY:"In Local Delivery",DELIVERED:"Delivered"},a={PORT:"Port",WAREHOUSE:"Warehouse",CUSTOMS_OFFICE:"Customs Office",DEALERSHIP:"Dealership",DELIVERY_POINT:"Delivery Point"},i={OPERATIONAL:"Operational",TEMPORARILY_CLOSED:"Temporarily Closed",UNDER_MAINTENANCE:"Under Maintenance"},s={ADMIN:"Admin",NORMAL:"Normal",CEO:"CEO"}}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=22702)),_N_E=e.O()}]);