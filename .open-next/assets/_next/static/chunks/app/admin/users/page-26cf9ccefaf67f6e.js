(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8733],{7054:(e,r,t)=>{Promise.resolve().then(t.bind(t,41729)),Promise.resolve().then(t.bind(t,69099)),Promise.resolve().then(t.bind(t,50448)),Promise.resolve().then(t.bind(t,25719)),Promise.resolve().then(t.bind(t,99606))},12181:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},14806:(e,r,t)=>{"use strict";e.exports=t(30125)},17910:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},20508:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},25719:(e,r,t)=>{"use strict";t.d(r,{UserSearchInput:()=>d});var a=t(95155),s=t(12115),l=t(20063),n=t(65142),i=t(86651);function d(e){let{initialValue:r=""}=e,t=(0,l.useRouter)(),[d,c]=(0,s.useState)(r);return(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(i.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(n.p,{placeholder:"Search users...",value:d,onChange:e=>(e=>{c(e);let r=new URLSearchParams(window.location.search);e?r.set("search",e):r.delete("search"),r.delete("page"),t.push("?".concat(r.toString()))})(e.target.value),className:"pl-10"})]})}},30125:(e,r,t)=>{"use strict";var a=t(12115),s="function"==typeof Object.is?Object.is:function(e,r){return e===r&&(0!==e||1/e==1/r)||e!=e&&r!=r},l=a.useState,n=a.useEffect,i=a.useLayoutEffect,d=a.useDebugValue;function c(e){var r=e.getSnapshot;e=e.value;try{var t=r();return!s(e,t)}catch(e){return!0}}var o="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,r){return r()}:function(e,r){var t=r(),a=l({inst:{value:t,getSnapshot:r}}),s=a[0].inst,o=a[1];return i(function(){s.value=t,s.getSnapshot=r,c(s)&&o({inst:s})},[e,t,r]),n(function(){return c(s)&&o({inst:s}),e(function(){c(s)&&o({inst:s})})},[e]),d(t),t};r.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:o},41729:(e,r,t)=>{"use strict";t.d(r,{RoleFilter:()=>i});var a=t(95155),s=t(20063),l=t(11186),n=t(66955);function i(e){let{initialValue:r="all"}=e,t=(0,s.useRouter)();return(0,a.jsxs)(l.l6,{value:r,onValueChange:e=>{let r=new URLSearchParams(window.location.search);"all"===e?r.delete("role"):r.set("role",e),r.delete("page"),t.push("?".concat(r.toString()))},children:[(0,a.jsxs)(l.bq,{className:"w-full sm:w-40",children:[(0,a.jsx)(n.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)(l.yv,{placeholder:"Role"})]}),(0,a.jsxs)(l.gC,{children:[(0,a.jsx)(l.eb,{value:"all",children:"All Roles"}),(0,a.jsx)(l.eb,{value:"Admin",children:"Admin"}),(0,a.jsx)(l.eb,{value:"CEO",children:"CEO"}),(0,a.jsx)(l.eb,{value:"Normal",children:"Normal"})]})]})}},46591:(e,r,t)=>{"use strict";t.d(r,{H4:()=>k,_V:()=>N,bL:()=>w});var a=t(12115),s=t(3468),l=t(70222),n=t(4129),i=t(97602),d=t(14806);function c(){return()=>{}}var o=t(95155),u="Avatar",[m,x]=(0,s.A)(u),[h,f]=m(u),v=a.forwardRef((e,r)=>{let{__scopeAvatar:t,...s}=e,[l,n]=a.useState("idle");return(0,o.jsx)(h,{scope:t,imageLoadingStatus:l,onImageLoadingStatusChange:n,children:(0,o.jsx)(i.sG.span,{...s,ref:r})})});v.displayName=u;var p="AvatarImage",j=a.forwardRef((e,r)=>{let{__scopeAvatar:t,src:s,onLoadingStatusChange:u=()=>{},...m}=e,x=f(p,t),h=function(e,r){let{referrerPolicy:t,crossOrigin:s}=r,l=(0,d.useSyncExternalStore)(c,()=>!0,()=>!1),i=a.useRef(null),o=l?(i.current||(i.current=new window.Image),i.current):null,[u,m]=a.useState(()=>y(o,e));return(0,n.N)(()=>{m(y(o,e))},[o,e]),(0,n.N)(()=>{let e=e=>()=>{m(e)};if(!o)return;let r=e("loaded"),a=e("error");return o.addEventListener("load",r),o.addEventListener("error",a),t&&(o.referrerPolicy=t),"string"==typeof s&&(o.crossOrigin=s),()=>{o.removeEventListener("load",r),o.removeEventListener("error",a)}},[o,s,t]),u}(s,m),v=(0,l.c)(e=>{u(e),x.onImageLoadingStatusChange(e)});return(0,n.N)(()=>{"idle"!==h&&v(h)},[h,v]),"loaded"===h?(0,o.jsx)(i.sG.img,{...m,ref:r,src:s}):null});j.displayName=p;var g="AvatarFallback",b=a.forwardRef((e,r)=>{let{__scopeAvatar:t,delayMs:s,...l}=e,n=f(g,t),[d,c]=a.useState(void 0===s);return a.useEffect(()=>{if(void 0!==s){let e=window.setTimeout(()=>c(!0),s);return()=>window.clearTimeout(e)}},[s]),d&&"loaded"!==n.imageLoadingStatus?(0,o.jsx)(i.sG.span,{...l,ref:r}):null});function y(e,r){return e?r?(e.src!==r&&(e.src=r),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}b.displayName=g;var w=v,N=j,k=b},50448:(e,r,t)=>{"use strict";t.d(r,{UserPagination:()=>d});var a=t(95155),s=t(20063),l=t(3998),n=t(90368),i=t(27937);function d(e){let{currentPage:r,totalPages:t}=e,d=(0,s.useRouter)(),c=e=>{let r=new URLSearchParams(window.location.search);r.set("page",e.toString()),d.push("?".concat(r.toString()))};return t<=1?null:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page ",r," of ",t]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>c(Math.max(r-1,1)),disabled:1===r,children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),"Previous"]}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,t)},(e,t)=>{let s=t+1;return(0,a.jsx)(l.$,{variant:r===s?"default":"outline",size:"sm",onClick:()=>c(s),className:"w-8 h-8 p-0",children:s},s)})}),(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>c(Math.min(r+1,t)),disabled:r===t,children:["Next",(0,a.jsx)(i.A,{className:"h-4 w-4"})]})]})]})}},68854:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},69099:(e,r,t)=>{"use strict";t.d(r,{UserStatusFilter:()=>i});var a=t(95155),s=t(20063),l=t(11186),n=t(66955);function i(e){let{initialValue:r="all"}=e,t=(0,s.useRouter)();return(0,a.jsxs)(l.l6,{value:r,onValueChange:e=>{let r=new URLSearchParams(window.location.search);"all"===e?r.delete("status"):r.set("status",e),r.delete("page"),t.push("?".concat(r.toString()))},children:[(0,a.jsxs)(l.bq,{className:"w-full sm:w-40",children:[(0,a.jsx)(n.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)(l.yv,{placeholder:"Status"})]}),(0,a.jsxs)(l.gC,{children:[(0,a.jsx)(l.eb,{value:"all",children:"All Status"}),(0,a.jsx)(l.eb,{value:"active",children:"Active"}),(0,a.jsx)(l.eb,{value:"inactive",children:"Inactive"})]})]})}},78874:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},85897:(e,r,t)=>{"use strict";t.d(r,{BK:()=>i,eu:()=>n,q5:()=>d});var a=t(95155);t(12115);var s=t(46591),l=t(64269);function n(e){let{className:r,...t}=e;return(0,a.jsx)(s.bL,{"data-slot":"avatar",className:(0,l.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",r),...t})}function i(e){let{className:r,...t}=e;return(0,a.jsx)(s._V,{"data-slot":"avatar-image",className:(0,l.cn)("aspect-square size-full",r),...t})}function d(e){let{className:r,...t}=e;return(0,a.jsx)(s.H4,{"data-slot":"avatar-fallback",className:(0,l.cn)("bg-muted flex size-full items-center justify-center rounded-full",r),...t})}},99606:(e,r,t)=>{"use strict";t.d(r,{UserTable:()=>g});var a=t(95155),s=t(12115),l=t(20063),n=t(11647),i=t(87270),d=t(85897),c=t(17910),o=t(68854),u=t(12181),m=t(20508),x=t(42529),h=t(78874),f=t(22668),v=t(3998),p=t(51834);function j(e){let{userId:r,isOpen:t,onClose:n}=e,i=(0,l.useRouter)(),[d,c]=(0,s.useState)(!1),o=async()=>{if(r){c(!0);try{if(!(await fetch("/api/users/".concat(r),{method:"DELETE"})).ok)throw Error("Failed to delete user");i.refresh(),n()}catch(e){console.error("Error deleting user:",e)}finally{c(!1)}}};return(0,a.jsx)(p.lG,{open:t,onOpenChange:n,children:(0,a.jsxs)(p.Cf,{children:[(0,a.jsx)(p.c7,{children:(0,a.jsx)(p.L3,{children:"Delete User"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{children:"Are you sure you want to delete this user? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(v.$,{variant:"outline",onClick:n,disabled:d,children:"Cancel"}),(0,a.jsx)(v.$,{variant:"destructive",onClick:o,disabled:d,children:d?"Deleting...":"Delete"})]})]})]})})}function g(e){let{users:r,sortBy:t,sortOrder:v}=e,p=(0,l.useRouter)(),[g,b]=(0,s.useState)(!1),[y,w]=(0,s.useState)(null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"rounded-md border overflow-x-auto",children:(0,a.jsxs)(i.XI,{children:[(0,a.jsx)(i.A0,{children:(0,a.jsxs)(i.Hj,{className:"bg-muted/50",children:[(0,a.jsx)(f.y,{field:"fullname",currentSortBy:t,currentSortOrder:v,className:"min-w-[200px]",children:"User"}),(0,a.jsx)(f.y,{field:"role",currentSortBy:t,currentSortOrder:v,className:"min-w-[140px] hidden md:table-cell",children:"Role"}),(0,a.jsx)(i.nd,{className:"px-3 py-3 min-w-[100px]",children:"Status"}),(0,a.jsx)(i.nd,{className:"px-3 py-3 min-w-[120px] hidden lg:table-cell",children:"Location"}),(0,a.jsx)(f.y,{field:"createdAt",currentSortBy:t,currentSortOrder:v,className:"min-w-[100px] hidden xl:table-cell",children:"Created"})]})}),(0,a.jsx)(i.BF,{children:r.map(e=>{let r,t;return(0,a.jsxs)(i.Hj,{className:"hover:bg-muted/50 cursor-pointer group",onClick:()=>{var r;return r=e.id,void p.push("/admin/users/".concat(r))},children:[(0,a.jsx)(i.nA,{className:"px-3 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(d.eu,{className:"w-10 h-10",children:[(0,a.jsx)(d.BK,{src:e.avatar}),(0,a.jsx)(d.q5,{className:"bg-blue-100 text-blue-600 text-sm font-semibold",children:e.fullname.split(" ").map(e=>e[0]).join("").toUpperCase()})]}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.fullname}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["ID: ",e.id]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground hidden sm:block",children:e.lastLogin?"Last login: ".concat((r=e.lastLogin,new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(r)))):"Never logged in"})]})]})}),(0,a.jsx)(i.nA,{className:"px-3 py-3 hidden md:table-cell",children:(0,a.jsxs)(n.E,{variant:"outline",className:"".concat((e=>{switch(e){case"Admin":return"bg-gradient-to-r from-red-50 to-red-100 text-red-700 border-red-200 dark:from-red-950 dark:to-red-900 dark:text-red-300 dark:border-red-700";case"CEO":return"bg-gradient-to-r from-purple-50 to-purple-100 text-purple-700 border-purple-200 dark:from-purple-950 dark:to-purple-900 dark:text-purple-300 dark:border-purple-700";case"Normal":return"bg-gradient-to-r from-blue-50 to-blue-100 text-blue-700 border-blue-200 dark:from-blue-950 dark:to-blue-900 dark:text-blue-300 dark:border-blue-700";default:return"bg-gradient-to-r from-gray-50 to-gray-100 text-gray-700 border-gray-200 dark:from-gray-950 dark:to-gray-900 dark:text-gray-300 dark:border-gray-700"}})(e.role)," text-xs px-2 py-1"),children:[(e=>{switch(e){case"Admin":return(0,a.jsx)(c.A,{className:"h-3 w-3"});case"CEO":return(0,a.jsx)(o.A,{className:"h-3 w-3"});case"Normal":return(0,a.jsx)(u.A,{className:"h-3 w-3"});default:return(0,a.jsx)(m.A,{className:"h-3 w-3"})}})(e.role),(0,a.jsx)("span",{className:"ml-1",children:e.role})]})}),(0,a.jsx)(i.nA,{className:"px-3 py-3",children:(0,a.jsxs)(n.E,{variant:"outline",className:"".concat(e.isActive?"bg-green-100 text-green-700 border-green-200 dark:bg-green-950 dark:text-green-300 dark:border-green-700":"bg-red-100 text-red-700 border-red-200 dark:bg-red-950 dark:text-red-300 dark:border-red-700"," text-xs px-2 py-1"),children:[e.isActive?(0,a.jsx)(x.A,{className:"h-3 w-3"}):(0,a.jsx)(h.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"ml-1",children:e.isActive?"Active":"Inactive"})]})}),(0,a.jsx)(i.nA,{className:"px-3 py-3 hidden lg:table-cell",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.location.name}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.location.address.city})]})}),(0,a.jsx)(i.nA,{className:"px-3 py-3 hidden xl:table-cell",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:(t=e.createdAt,new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(t)))})})]},e.id)})})]})}),(0,a.jsx)(j,{userId:y,isOpen:g,onClose:()=>{b(!1),w(null)}})]})}}},e=>{e.O(0,[5239,3637,4127,2673,3437,1691,5485,8441,1255,7358],()=>e(e.s=7054)),_N_E=e.O()}]);